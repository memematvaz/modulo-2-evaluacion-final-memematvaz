"use strict";console.log(">> Ready :)");const searchButton=document.querySelector("#search-button"),searchInput=document.querySelector("#search-input"),main=document.querySelector("#main"),section=document.querySelector(".section"),favouriteContainerList=document.querySelector("#favourites-series");let serieList=null;const selectedSeries=readLocalStorage();function connectToApi(){let e="http://api.tvmaze.com/search/shows?q="+searchInput.value;fetch(e).then(e=>e.json()).then(e=>{serieList=e,renderSeries(serieList)})}function renderSeries(e){main.innerHTML="";for(let t of e)null!==t.show.image?main.innerHTML+=`<section id='${t.show.id}' class='section'><div><img src=${t.show.image.medium} alt=${t.show.name} class='image'></div><h3 class='section-title'>${t.show.name}</h3></section>`:main.innerHTML+=`<section id='${t.show.id}' class='section'><div><img src='https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV' alt=${t.show.name} class='image container'></div><h3 class='section-title'>${t.show.name}</h3></section>`;addClickListeners()}function addClickListeners(){const e=document.querySelectorAll(".section");for(let t of e)t.addEventListener("click",saveFavourites)}function setLocalStorage(){localStorage.setItem("serieInfo",JSON.stringify(selectedSeries))}function readLocalStorage(){let e=JSON.parse(localStorage.getItem("serieInfo"));return null!==e?e:[]}function saveFavourites(e){e.currentTarget.classList.add("section-favourite");const t=getSerieId(e.currentTarget.id);-1===selectedSeries.map(e=>e.id).indexOf(t.show.id)?(selectedSeries.push(t.show),setLocalStorage(),renderFavourites(selectedSeries)):alert("Esa serie ya estÃ¡ en favoritos")}function getSerieId(e){return serieList.find(t=>t.show.id===parseInt(e))}function renderFavourites(e){favouriteContainerList.innerHTML="";for(let t of e)null!==t.image?favouriteContainerList.innerHTML+=`<li><img src=${t.image.medium} alt=${t.name} </img> <p  class='li-title'>${t.name}</p><li>`:favouriteContainerList.innerHTML+=`<li><img src='https://via.placeholder.com/210x295/ffffff/666666/?\n    text=TV' alt=${t.name} </img> <p  class='li-title'>${t.name}</p><li>`}renderFavourites(selectedSeries),searchButton.addEventListener("click",connectToApi);